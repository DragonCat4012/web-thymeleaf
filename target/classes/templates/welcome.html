<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

    <title>Spring Boot Thymeleaf Hello World Example</title>

    <link rel="stylesheet" th:href="@{webjars/bootstrap/4.2.1/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />

</head>

<body>

    <form th:object="${form}">
        <div>
            <label for="reservation-date"></label>
            <input class="formContent" type="datetime-local" th:field="*{date}"
                th:onchange="reloadAlleyOptions(this.getAttribute('data-date'))" th:data-date="*{date}" />
        </div>

        <button type="submit"></button>

    </form>
</body>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script>
    $(document).bind("ajaxSend", function () {
        console.log("waiting for all requests to complete...");
        // ajaxStop (Global Event)
        // This global event is triggered if there are no more Ajax requests being processed.
    }).bind("ajaxStop", function () {
        // maybe reload here?
        location.reload();
    });

    function reloadAlleyOptions(date) {
        console.log(date)
        console.log("---")
        $.ajax({
            method: "post",
            type: "POST",
            url: "/hello/a?date=" + date,
            success: function (response) {

            },
            error: function (e) {}
        });
    }
</script>



</html>